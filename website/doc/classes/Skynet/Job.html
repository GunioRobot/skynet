<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Skynet::Job</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Skynet::Job</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/skynet/skynet_job_rb.html">
                lib/skynet/skynet_job.rb
                </a>
        <br />
                <a href="../../files/lib/skynet/skynet_tuplespace_server_rb.html">
                lib/skynet/skynet_tuplespace_server.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
<a href="Job.html">Skynet::Job</a> is the main interface to Skynet. You
create a job object giving it the starting data (map_data), along with what
class has the map/reduce functions in it. Even though Skynet is
distributed, when you call <a href="Job.html#M000210">run</a> on a plain <a
href="Job.html">Skynet::Job</a>, it will still block in your current
process until it has completed your task. If you want to go on to do other
things you&#8216;ll want to pass :async =&gt; true when creating a <a
href="Job.html#M000209">new</a> job. Then later call job.results to
retrieve your <a href="Job.html#M000212">results</a>.
</p>
<p>
There are also many global configuration options which can be controlled
through Skynet::CONFIG
</p>
<p>
Example Usage: Create a file called mapreduce_test.rb with the following.
</p>
<pre>
  class MapreduceTest
    include SkynetDebugger   ## This gives you logging methods such as log, error, info, fatal

    def self.run
      job = Skynet::Job.new(
        :mappers          =&gt; 2,
        :reducers         =&gt; 1,
        :map_reduce_class =&gt; self,
        :map_data         =&gt; [OpenStruct.new({:created_by =&gt; 2}),OpenStruct.new({:created_by =&gt; 2}),OpenStruct.new({:created_by =&gt; 3})]
      )
      results = job.run
    end

    def self.map(profiles)
      result = Array.new
      profiles.each do |profile|
        result &lt;&lt; [profile.created_by, 1] if profile.created_by
      end
      result
    end

    def self.reduce(pairs)
      totals = Hash.new
      pairs.each do |pair|
        created_by, count = pair[0], pair[1]
        totals[created_by] ||= 0
        totals[created_by] += count
      end
      totals
    end
  end
</pre>
<p>
You need to make sure Skynet is running with your class loaded.
That&#8216;s is how Skynet works. Since there is no easy way to actually
pass code around the network, each skynet worker must already have your
code loaded. If you have skynet started, stop it and then start it with the
-r flag to tell it where to find your class it should require.
</p>
<pre>
   $ skynet -r mapreduce_test.rb
</pre>
<p>
Then go into the skynet console to test running your map reduce task.
</p>
<pre>
   $ skynet console -r mapreduce_test.rb
   skynet&gt;&gt; MapreduceTest.run     # returns {2=&gt;2, 3=&gt;1}
</pre>
<p>
In the example above, you might notice that self.map and self.reduce both
accept Arrays. If you do not want to deal with getting arrays of map_data
or reduce_data, you can include <a
href="../MapreduceHelper.html">MapreduceHelper</a> into your class and then
implement self.map_each and self.reduce_each methods. The included self.map
and self.reduce methods will handle iterating over the map_data and
reduce_data, passing each element to your map_each and reduce_each methods
respectively. They will also handle error handling within that loop to make
sure even if a single map or reduce fails, processing will continue. If you
do not want processing to continue if a map fails, do not use the <a
href="../MapreduceHelper.html">MapreduceHelper</a> mixin.
</p>
<p>
Since Skynet must have your code, you will probably want to install skynet
into the application that skynet needs access to in order to <a
href="Job.html#M000210">run</a> your jobs. See <a
href="../../files/bin/skynet_install.html">bin/skynet_install</a> for more
info.
</p>
<p>
See <a href="Job.html#M000209">new</a> for the many other options to
control various <a href="Job.html">Skynet::Job</a> settings.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000234">async?</a>&nbsp;&nbsp;
      <a href="#M000208">debug_class_desc</a>&nbsp;&nbsp;
      <a href="#M000244">display_info</a>&nbsp;&nbsp;
      <a href="#M000219">enqueue_messages</a>&nbsp;&nbsp;
      <a href="#M000220">gather_results</a>&nbsp;&nbsp;
      <a href="#M000229">keep_map_tasks</a>&nbsp;&nbsp;
      <a href="#M000230">keep_reduce_tasks</a>&nbsp;&nbsp;
      <a href="#M000236">local_master?</a>&nbsp;&nbsp;
      <a href="#M000252">local_mq</a>&nbsp;&nbsp;
      <a href="#M000221">local_mq_reset!</a>&nbsp;&nbsp;
      <a href="#M000247">map=</a>&nbsp;&nbsp;
      <a href="#M000246">map_data=</a>&nbsp;&nbsp;
      <a href="#M000214">map_enqueue</a>&nbsp;&nbsp;
      <a href="#M000231">map_local?</a>&nbsp;&nbsp;
      <a href="#M000249">map_reduce_class=</a>&nbsp;&nbsp;
      <a href="#M000215">map_results</a>&nbsp;&nbsp;
      <a href="#M000227">map_retry</a>&nbsp;&nbsp;
      <a href="#M000223">map_tasks</a>&nbsp;&nbsp;
      <a href="#M000235">master?</a>&nbsp;&nbsp;
      <a href="#M000211">master_enqueue</a>&nbsp;&nbsp;
      <a href="#M000213">master_results</a>&nbsp;&nbsp;
      <a href="#M000226">master_retry</a>&nbsp;&nbsp;
      <a href="#M000222">master_task</a>&nbsp;&nbsp;
      <a href="#M000251">mq</a>&nbsp;&nbsp;
      <a href="#M000253">mq</a>&nbsp;&nbsp;
      <a href="#M000209">new</a>&nbsp;&nbsp;
      <a href="#M000216">partition_data</a>&nbsp;&nbsp;
      <a href="#M000248">reduce=</a>&nbsp;&nbsp;
      <a href="#M000217">reduce_enqueue</a>&nbsp;&nbsp;
      <a href="#M000232">reduce_local?</a>&nbsp;&nbsp;
      <a href="#M000218">reduce_results</a>&nbsp;&nbsp;
      <a href="#M000228">reduce_retry</a>&nbsp;&nbsp;
      <a href="#M000224">reduce_tasks</a>&nbsp;&nbsp;
      <a href="#M000239">reset!</a>&nbsp;&nbsp;
      <a href="#M000212">results</a>&nbsp;&nbsp;
      <a href="#M000210">run</a>&nbsp;&nbsp;
      <a href="#M000250">run_master</a>&nbsp;&nbsp;
      <a href="#M000238">single?</a>&nbsp;&nbsp;
      <a href="#M000237">solo?</a>&nbsp;&nbsp;
      <a href="#M000245">start_after=</a>&nbsp;&nbsp;
      <a href="#M000241">task_id</a>&nbsp;&nbsp;
      <a href="#M000225">tasks_to_messages</a>&nbsp;&nbsp;
      <a href="#M000240">to_h</a>&nbsp;&nbsp;
      <a href="#M000233">use_local_queue?</a>&nbsp;&nbsp;
      <a href="#M000242">version</a>&nbsp;&nbsp;
      <a href="#M000243">version=</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->
    <div id="includes">
      <h3 class="section-bar">Included Modules</h3>

      <div id="includes-list">
        <span class="include-name"><a href="../SkynetDebugger.html">SkynetDebugger</a></span>
        <span class="include-name"><a href="GuidGenerator.html">Skynet::GuidGenerator</a></span>
      </div>
    </div>

    <div id="section">

    <div id="class-list">
      <h3 class="section-bar">Classes and Modules</h3>

      Class <a href="Job/BadMapOrReduceError.html" class="link">Skynet::Job::BadMapOrReduceError</a><br />
Class <a href="Job/Error.html" class="link">Skynet::Job::Error</a><br />
Class <a href="Job/LocalMessageQueue.html" class="link">Skynet::Job::LocalMessageQueue</a><br />
Class <a href="Job/WorkerError.html" class="link">Skynet::Job::WorkerError</a><br />

    </div>

    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">FIELDS</td>
          <td>=</td>
          <td class="context-item-value">[:queue_id, :mappers, :reducers, :silent, :name, :map_timeout, :map_data, :job_id,               :reduce_timeout, :master_timeout, :map_name, :reduce_name,               :master_result_timeout, :result_timeout, :start_after, :solo, :single, :version,               :map, :map_partitioner, :reduce, :reduce_partition, :map_reduce_class,               :master_retry, :map_retry, :reduce_retry,               :keep_map_tasks, :keep_reduce_tasks,               :local_master, :async</td>
        </tr>
        </table>
      </div>
    </div>



    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">use_local_queue</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000208" class="method-detail">
        <a name="M000208"></a>

        <div class="method-heading">
          <a href="Job.src/M000208.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000208.html');return false;">
          <span class="method-name">debug_class_desc</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000253" class="method-detail">
        <a name="M000253"></a>

        <div class="method-heading">
          <a href="Job.src/M000253.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000253.html');return false;">
          <span class="method-name">mq</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000209" class="method-detail">
        <a name="M000209"></a>

        <div class="method-heading">
          <a href="Job.src/M000209.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000209.html');return false;">
          <span class="method-name">new</span><span class="method-args">(options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Most of the time you will merely call new(options) and then <a
href="Job.html#M000210">run</a> on the returned object.
</p>
<p>
Options are: <tt>:local_master</tt> BOOL (DEFAULT true)
</p>
<pre>
  By default, your Skynet::Job will act as the master for your map/reduce job, doling out
  tasks, waiting for other workers to complete and return their results and dealing with
  merging and partitioning the data.   If you call #run in async mode, another worker will handle
  being the master for your job without blocking.  If you run :async =&gt; false, :local_master =&gt; false
  Skynet will let another worker be the master for your job, but will block waiting for the
  final results.  The benefit of this is that if your process dies, the Job will continue to
  run remotely.
</pre>
<p>
<tt>:async</tt> BOOL (DEFAULT false)
</p>
<pre>
  If you run in async mode, another worker will handle being the master for your job without blocking.
  You can not pass :local_master =&gt; true, :async =&gt; true since the only way to allow your
  job to run asyncronously is to have a remote_master.
</pre>
<p>
<tt>:map_data</tt>(Array or <a href="../Enumerable.html">Enumerable</a>)
</p>
<pre>
   map_data should be an Array or Enumerable that data Skynet::Job will split up
   and distribute among your workers.   You can stream data to Skynet::Job by passing
   an Enumerable that implements next or each.
</pre>
<p>
<tt>:map_reduce_class</tt>(Class or Class Name)
</p>
<pre>
  Skynet::Job will look for class methods named self.map, self.reduce, self.map_partitioner,
  self.reduce_partition in your map_reduce_class.  The only method requires is self.map.
  Each of these methods must accept an array.  Examples above.
</pre>
<p>
<tt>:map</tt>(Class Name)
</p>
<pre>
  You can pass a classname, or a proc.  If you pass a classname, Job will look for a method
  called self.map in that class.
  WARNING: Passing a proc does not work right now.
</pre>
<p>
<tt>:reduce</tt>(Class Name)
</p>
<pre>
  You can pass a classname, or a proc.  If you pass a classname, Job will look for a method
  called self.reduce in that class.
  WARNING: Passing a proc does not work right now.
</pre>
<p>
<tt>:reduce_partition</tt>(Class Name)
</p>
<pre>
  You can pass a classname, or a proc.  If you pass a classname, Job will look for a method
  called self.reduce_partition in that class.
  WARNING: Passing a proc does not work right now.
</pre>
<p>
<tt>:mappers</tt> Fixnum
</p>
<pre>
  The number of mappers to partition map data for.
</pre>
<p>
<tt>:reducers</tt> Fixnum
</p>
<pre>
  The number of reducers to partition the returned map_data for.
</pre>
<p>
<tt>:<a href="Job.html#M000226">master_retry</a></tt> Fixnum
</p>
<pre>
  If the master fails for any reason, how many times should it be retried?  You can also set
  Skynet::CONFIG[:DEFAULT_MASTER_RETRY] (DEFAULT 0)
</pre>
<p>
<tt>:<a href="Job.html#M000227">map_retry</a></tt> Fixnum
</p>
<pre>
  If a map task fails for any reason, how many times should it be retried?  You can also set
  Skynet::CONFIG[:DEFAULT_MAP_RETRY] (DEFAULT 3)
</pre>
<p>
<tt>:<a href="Job.html#M000228">reduce_retry</a></tt> Fixnum
</p>
<pre>
  If a reduce task fails for any reason, how many times should it be retried?  You can also set
  Skynet::CONFIG[:DEFAULT_REDUCE_RETRY] (DEFAULT 3)
</pre>
<p>
<tt>:master_timeout</tt>, <tt>:map_timeout</tt>, <tt>:reduce_timeout</tt>,
<tt>master_result_timeout</tt>, <tt>result_timeout</tt>
</p>
<pre>
  These control how long skynet should wait for particular actions to be finished.
  The master_timeout controls how long the master should wait for ALL map/reduce tasks ie. the entire job to finish.
  The master_result_timeout controls how long the final result should wait in the queue before being expired.
  The map and reduce timeouts control how long individual map and reduce tasks shoudl take.
</pre>
<p>
<tt>:single</tt> BOOL
</p>
<pre>
  By default the master task distributes the map and reduce tasks to other workers.
  In single mode the master will take care of the map and reduce tasks by itself.
  This is handy when you really want to just perform some single action asyncronously.
  In this case you're merely using Skynet to postpone some action. In single mode, the
  first worker that picks up your task will just complete it as opposed to trying to distribute
  it to another worker.
</pre>
<p>
<tt>:start_after</tt> Time or Time.to_i
</p>
<pre>
  Do not start job until :start_after has passed
</pre>
<p>
<tt>:queue</tt> <a href="../String.html">String</a>
</p>
<pre>
  Which queue should this Job go in to?  The queue provided is merely used to
  determine the queue_id.
  Queues are defined in Skynet::CONFIG[:MESSAGE_QUEUES]
</pre>
<p>
<tt>:queue_id</tt> Fixnum (DEFAULT 0)
</p>
<pre>
  Which queue should this Job go in to?
  Queues are defined in Skynet::CONFIG[:MESSAGE_QUEUES]
</pre>
<p>
<tt>:solo</tt> BOOL
</p>
<pre>
  One normally turns solo mode in in Skynet::Config using Skynet::CONFIG[:SOLO] = true
  In solo mode, Skynet jobs do not add items to a Skynet queue. Instead they do all
  work in place.  It's like a Skynet simulation mode.  It will complete all tasks
  without Skynet running.  Great for testing.  You can also wrap code blocks in
  Skynet.solo {} to run that code in solo mode.
</pre>
<p>
<tt>:<a href="Job.html#M000242">version</a></tt> Fixnum
</p>
<pre>
  If you do not provide a version the current worker version will be used.
  Skynet workers start at a specific version and only look for jobs that match that version.
  A worker will continue looking for jobs at that version until there are no more jobs left on
  the queue for that version.  At that time, the worker will check to see if there is a new version.
  If there is, it will restart itself at the new version (assuming you had already pushed code to
  said workers.)
  To retrieve the current version, set the current version or increment the current version, see
  Skynet::Job.set_worker_version, Skynet::Job.get_worker_version, Skynet::Job.increment_worker_version
</pre>
<p>
<tt>:name</tt>, <tt>:map_name</tt>, <tt>:reduce_name</tt>
</p>
<pre>
  These name methods are merely for debugging while watching the Skynet logs or the Skynet queue.
  If you do not supply names, it will try and provide sensible ones based on your class names.
</pre>
<p>
<tt>:<a href="Job.html#M000229">keep_map_tasks</a></tt> BOOL or Fixnum
(DEFAULT 1)
</p>
<pre>
  If true, the master will run the map_tasks locally.
  If a number is provided, the master will run the map_tasks locally if there are
  LESS THAN OR EQUAL TO the number provided.
  You may also set Skynet::CONFIG[:DEFAILT_KEEP_MAP_TASKS] DEFAULT 1
</pre>
<p>
<tt>:<a href="Job.html#M000230">keep_reduce_tasks</a></tt> BOOL or Fixnum
(DEFAULT 1)
</p>
<pre>
  If true, the master will run the reduce_tasks locally.
  If a number is provided, the master will run the reduce_tasks locally if there are
  LESS THAN OR EQUAL TO the number provided.
  You may also set Skynet::CONFIG[:DEFAILT_REDUCVE_MAP_TASKS] DEFAULT 1
</pre>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000234" class="method-detail">
        <a name="M000234"></a>

        <div class="method-heading">
          <a href="Job.src/M000234.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000234.html');return false;">
          <span class="method-name">async?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
async is true if the async flag is set and the job is not a
&#8216;single&#8217; job, or in solo mode. async only applies to whether we
<a href="Job.html#M000210">run</a> the master locally and whether we poll
for the result
</p>
        </div>
      </div>

      <div id="method-M000244" class="method-detail">
        <a name="M000244"></a>

        <div class="method-heading">
          <a href="Job.src/M000244.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000244.html');return false;">
          <span class="method-name">display_info</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000219" class="method-detail">
        <a name="M000219"></a>

        <div class="method-heading">
          <a href="Job.src/M000219.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000219.html');return false;">
          <span class="method-name">enqueue_messages</span><span class="method-args">(messages)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000220" class="method-detail">
        <a name="M000220"></a>

        <div class="method-heading">
          <a href="Job.src/M000220.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000220.html');return false;">
          <span class="method-name">gather_results</span><span class="method-args">(number_of_tasks, timeout=nil, description=nil)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000229" class="method-detail">
        <a name="M000229"></a>

        <div class="method-heading">
          <a href="Job.src/M000229.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000229.html');return false;">
          <span class="method-name">keep_map_tasks</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000230" class="method-detail">
        <a name="M000230"></a>

        <div class="method-heading">
          <a href="Job.src/M000230.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000230.html');return false;">
          <span class="method-name">keep_reduce_tasks</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000236" class="method-detail">
        <a name="M000236"></a>

        <div class="method-heading">
          <a href="Job.src/M000236.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000236.html');return false;">
          <span class="method-name">local_master?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000252" class="method-detail">
        <a name="M000252"></a>

        <div class="method-heading">
          <a href="Job.src/M000252.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000252.html');return false;">
          <span class="method-name">local_mq</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000221" class="method-detail">
        <a name="M000221"></a>

        <div class="method-heading">
          <a href="Job.src/M000221.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000221.html');return false;">
          <span class="method-name">local_mq_reset!</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000247" class="method-detail">
        <a name="M000247"></a>

        <div class="method-heading">
          <a href="Job.src/M000247.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000247.html');return false;">
          <span class="method-name">map=</span><span class="method-args">(map)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000246" class="method-detail">
        <a name="M000246"></a>

        <div class="method-heading">
          <a href="Job.src/M000246.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000246.html');return false;">
          <span class="method-name">map_data=</span><span class="method-args">(map_data)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000214" class="method-detail">
        <a name="M000214"></a>

        <div class="method-heading">
          <a href="Job.src/M000214.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000214.html');return false;">
          <span class="method-name">map_enqueue</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000231" class="method-detail">
        <a name="M000231"></a>

        <div class="method-heading">
          <a href="Job.src/M000231.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000231.html');return false;">
          <span class="method-name">map_local?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000249" class="method-detail">
        <a name="M000249"></a>

        <div class="method-heading">
          <a href="Job.src/M000249.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000249.html');return false;">
          <span class="method-name">map_reduce_class=</span><span class="method-args">(klass)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000215" class="method-detail">
        <a name="M000215"></a>

        <div class="method-heading">
          <a href="Job.src/M000215.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000215.html');return false;">
          <span class="method-name">map_results</span><span class="method-args">(number_of_tasks)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000227" class="method-detail">
        <a name="M000227"></a>

        <div class="method-heading">
          <a href="Job.src/M000227.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000227.html');return false;">
          <span class="method-name">map_retry</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000223" class="method-detail">
        <a name="M000223"></a>

        <div class="method-heading">
          <a href="Job.src/M000223.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000223.html');return false;">
          <span class="method-name">map_tasks</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000235" class="method-detail">
        <a name="M000235"></a>

        <div class="method-heading">
          <a href="Job.src/M000235.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000235.html');return false;">
          <span class="method-name">master?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000211" class="method-detail">
        <a name="M000211"></a>

        <div class="method-heading">
          <a href="Job.src/M000211.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000211.html');return false;">
          <span class="method-name">master_enqueue</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000213" class="method-detail">
        <a name="M000213"></a>

        <div class="method-heading">
          <a href="Job.src/M000213.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000213.html');return false;">
          <span class="method-name">master_results</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000226" class="method-detail">
        <a name="M000226"></a>

        <div class="method-heading">
          <a href="Job.src/M000226.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000226.html');return false;">
          <span class="method-name">master_retry</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000222" class="method-detail">
        <a name="M000222"></a>

        <div class="method-heading">
          <a href="Job.src/M000222.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000222.html');return false;">
          <span class="method-name">master_task</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000251" class="method-detail">
        <a name="M000251"></a>

        <div class="method-heading">
          <a href="Job.src/M000251.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000251.html');return false;">
          <span class="method-name">mq</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000216" class="method-detail">
        <a name="M000216"></a>

        <div class="method-heading">
          <a href="Job.src/M000216.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000216.html');return false;">
          <span class="method-name">partition_data</span><span class="method-args">(post_map_data)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000248" class="method-detail">
        <a name="M000248"></a>

        <div class="method-heading">
          <a href="Job.src/M000248.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000248.html');return false;">
          <span class="method-name">reduce=</span><span class="method-args">(reduce)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000217" class="method-detail">
        <a name="M000217"></a>

        <div class="method-heading">
          <a href="Job.src/M000217.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000217.html');return false;">
          <span class="method-name">reduce_enqueue</span><span class="method-args">(partitioned_data)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000232" class="method-detail">
        <a name="M000232"></a>

        <div class="method-heading">
          <a href="Job.src/M000232.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000232.html');return false;">
          <span class="method-name">reduce_local?</span><span class="method-args">(reduce_tasks)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000218" class="method-detail">
        <a name="M000218"></a>

        <div class="method-heading">
          <a href="Job.src/M000218.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000218.html');return false;">
          <span class="method-name">reduce_results</span><span class="method-args">(number_of_tasks)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000228" class="method-detail">
        <a name="M000228"></a>

        <div class="method-heading">
          <a href="Job.src/M000228.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000228.html');return false;">
          <span class="method-name">reduce_retry</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000224" class="method-detail">
        <a name="M000224"></a>

        <div class="method-heading">
          <a href="Job.src/M000224.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000224.html');return false;">
          <span class="method-name">reduce_tasks</span><span class="method-args">(partitioned_data)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000239" class="method-detail">
        <a name="M000239"></a>

        <div class="method-heading">
          <a href="Job.src/M000239.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000239.html');return false;">
          <span class="method-name">reset!</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000212" class="method-detail">
        <a name="M000212"></a>

        <div class="method-heading">
          <a href="Job.src/M000212.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000212.html');return false;">
          <span class="method-name">results</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the final <a href="Job.html#M000212">results</a> of this map/reduce
job. If <a href="Job.html#M000212">results</a> is called on an :async job
calling <a href="Job.html#M000212">results</a> will block until <a
href="Job.html#M000212">results</a> are found or the master_timeout is
reached.
</p>
        </div>
      </div>

      <div id="method-M000210" class="method-detail">
        <a name="M000210"></a>

        <div class="method-heading">
          <a href="Job.src/M000210.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000210.html');return false;">
          <span class="method-name">run</span><span class="method-args">(options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Options are: <tt>:local_master</tt> BOOL (DEFAULT true)
</p>
<pre>
  By default, your Skynet::Job will act as the master for your map/reduce job, doling out
  tasks, waiting for other workers to complete and return their results and dealing with
  merging and partitioning the data.   If you run in async mode, another worker will handle
  being the master for your job without blocking.  If you run :async =&gt; false, :local_master =&gt; false
  Skynet will let another worker be the master for your job, but will block waiting for the
  final results.  The benefit of this is that if your process dies, the Job will continue to
  run remotely.
</pre>
<p>
<tt>:async</tt> BOOL (DEFAULT false)
</p>
<pre>
  If you run in async mode, another worker will handle being the master for your job without blocking.
  You can not pass :local_master =&gt; true, :async =&gt; true since the only way to allow your
  job to run asyncronously is to have a remote_master.

  You can pass any options you might pass to Skynet::Job.new.  Warning: Passing options to run
  will permanently change properties of the job.
</pre>
        </div>
      </div>

      <div id="method-M000250" class="method-detail">
        <a name="M000250"></a>

        <div class="method-heading">
          <a href="Job.src/M000250.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000250.html');return false;">
          <span class="method-name">run_master</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000238" class="method-detail">
        <a name="M000238"></a>

        <div class="method-heading">
          <a href="Job.src/M000238.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000238.html');return false;">
          <span class="method-name">single?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000237" class="method-detail">
        <a name="M000237"></a>

        <div class="method-heading">
          <a href="Job.src/M000237.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000237.html');return false;">
          <span class="method-name">solo?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000245" class="method-detail">
        <a name="M000245"></a>

        <div class="method-heading">
          <a href="Job.src/M000245.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000245.html');return false;">
          <span class="method-name">start_after=</span><span class="method-args">(time)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000241" class="method-detail">
        <a name="M000241"></a>

        <div class="method-heading">
          <a href="Job.src/M000241.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000241.html');return false;">
          <span class="method-name">task_id</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000225" class="method-detail">
        <a name="M000225"></a>

        <div class="method-heading">
          <a href="Job.src/M000225.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000225.html');return false;">
          <span class="method-name">tasks_to_messages</span><span class="method-args">(tasks)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000240" class="method-detail">
        <a name="M000240"></a>

        <div class="method-heading">
          <a href="Job.src/M000240.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000240.html');return false;">
          <span class="method-name">to_h</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000233" class="method-detail">
        <a name="M000233"></a>

        <div class="method-heading">
          <a href="Job.src/M000233.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000233.html');return false;">
          <span class="method-name">use_local_queue?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000242" class="method-detail">
        <a name="M000242"></a>

        <div class="method-heading">
          <a href="Job.src/M000242.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000242.html');return false;">
          <span class="method-name">version</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000243" class="method-detail">
        <a name="M000243"></a>

        <div class="method-heading">
          <a href="Job.src/M000243.html" target="Code" class="method-signature"
            onclick="popupCode('Job.src/M000243.html');return false;">
          <span class="method-name">version=</span><span class="method-args">(v)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>