#!/usr/bin/env ruby

require File.expand_path(File.dirname(__FILE__)) + '/../lib/skynet.rb'         

Skynet::CONFIG[:WORKER_CHECK_DELAY] = 4
Skynet::CONFIG[:LAUNCHER_PATH]          = File.expand_path(__FILE__)

begin
  mq = Skynet::MessageQueue.new
rescue Skynet::ConnectionError
  if Skynet::MessageQueue.adapter == :tuplespace
    pid = fork do
      exec("skynet_tuplespace_server start")
    end
    sleep 3
  end
end


Skynet.new
